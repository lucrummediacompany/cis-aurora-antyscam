<!DOCTYPE html>
<html lang="pl">
<head>
  <script>
    var o_options = {
      domain: 'lucrum-media-company-spolka-z-ograniczona-odpowiedzialnoscia.outseta.com',
      load: 'auth,customForm,emailList,leadCapture,nocode,profile,support'
    };
  </script>
  <script src="https://cdn.outseta.com/outseta.min.js" data-options="o_options"></script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CIS Aurora ‚Äî AntyScam</title>

  <style>
    :root { color-scheme: dark; }
    body { font-family: Arial, sans-serif; margin: 32px; background: #0e0f13; color: #e6e7ea; }
    .wrap { max-width: 900px; margin: auto; }
    h1 { margin-bottom: 6px; font-size: 28px; display:flex; align-items:center; gap:10px; }
    h1 span.logo-brain{ font-size:30px; }
    h1 span.title-text{
      background: linear-gradient(90deg,#f5c86a,#ff7fd1);
      -webkit-background-clip:text;
      background-clip:text;
      color: transparent;
      font-weight: 700;
    }
    .tagline { margin-top: 2px; }
    .card { border: 1px solid #2a2e37; border-radius: 12px; padding: 16px; margin-top: 16px; background: #141720; box-shadow: 0 2px 10px rgba(0,0,0,.4); }
    input[type=text]{ width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #2a2e37; background: #0f1220; color: #e6e7ea; }
    button { padding: 10px 16px; border-radius: 8px; border: none; cursor: pointer; transition: all .2s ease-in-out; }
    button.primary { background: #1f2330; color: #e6e7ea; }
    button.primary:hover { background: #2b3242; }
    pre { white-space: pre-wrap; background: #0f1220; padding: 12px; border-radius: 8px; max-height: 480px; overflow: auto; color: #e6e7ea; }
    .muted { color: #9aa0a6; font-size: 14px; }
    .row { display: flex; gap: 8px; margin-top: 8px; flex-wrap:wrap; }
    nav.row { margin-bottom: 12px; }
    nav.row a.button{
  text-decoration: none;
  background: #1f2330;
  color: #e6e7ea;
  padding: 8px 14px;
  border-radius: 8px;
  transition: background .2s;
  cursor: pointer;
}
    nav.row a.button:hover { background: #2b3242; }
    .status-bar { margin: 10px 0 6px 0; padding: 10px 12px; border: 1px solid #2a2e37; border-radius: 10px; background: #101421; font-size: 14px; display: flex; align-items: center; justify-content: space-between; gap: 12px; flex-wrap: wrap; }
    .status-bar .left { display:flex; gap:10px; align-items:center; }
    .status-pill{ padding: 4px 8px; border-radius: 999px; background: #1f2330; border: 1px solid #2a2e37; font-size: 12px; color: #e6e7ea; }

    .brand-bar{
      margin: 4px 0 10px 0;
      padding: 10px 12px;
      border-radius: 10px;
      background: linear-gradient(90deg,#151826,#101421);
      border: 1px solid #252a38;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
      font-size:13px;
    }
    .brand-bar .label{ color:#9aa0a6; }
    .brand-badges{ display:flex; gap:8px; flex-wrap:wrap; }
    .brand-badge{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid #303549;
      background:#181b29;
      text-decoration:none;
      color:#e6e7ea;
      font-size:13px;
    }
    .brand-badge:hover{ background:#23283a; }
    .brand-icon{
      display:inline-block;
      width:16px;
      height:16px;
    }
    .brand-icon.outseta{
      border-radius:999px;
      border:2px solid #f5c86a;
      box-shadow:inset 0 0 0 2px #181b29;
    }
    .brand-icon.stripe{
      border-radius:4px;
      background:linear-gradient(135deg,#635bff,#7a5cff);
    }

    .denied { text-align: center; padding: 28px; border: 1px dashed #2a2e37; background: linear-gradient(180deg,#121520,#0e1018); }
    .denied h3 { margin: 0 0 6px 0; }
    .cta-row { display:flex; gap:8px; justify-content:center; margin-top:12px; flex-wrap:wrap; }
    .cta-row a.button{
  background:#2b3242;
  cursor:pointer;
}
    .cta-row a.button:hover { background:#3a4257; }

    .footer{
      margin-top:26px;
      text-align:center;
      font-size:13px;
      color:#6f7684;
    }
    .footer a{
      color:#b1b7ff;
      text-decoration:none;
    }
    .footer a:hover{
      text-decoration:underline;
    }

    /* === LEGEND STYLES === */
    .legend-short {
      margin-top: 16px;
      padding: 14px 16px;
      border-radius: 12px;
      background:
        radial-gradient(circle at top left, rgba(245, 200, 106, 0.12), transparent 60%),
        radial-gradient(circle at bottom right, rgba(255, 127, 209, 0.10), transparent 60%);
      border: 1px solid rgba(255, 255, 255, 0.08);
      font-size: 0.9rem;
      line-height: 1.5;
      text-align: left;
      box-shadow: 0 14px 35px rgba(0, 0, 0, 0.55);
    }
    .legend-short-title {
      font-weight: 600;
      margin-bottom: 6px;
      font-size: 0.96rem;
    }
    .legend-short ul {
      margin: 0 0 6px 0;
      padding: 0;
      list-style: none;
    }
    .legend-short li {
      margin-bottom: 4px;
      display: flex;
      align-items: flex-start;
      gap: 10px;
    }
    .legend-short li strong {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-width: 70px;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 0.78rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      border: 1px solid rgba(255, 255, 255, 0.18);
      background: rgba(15, 18, 32, 0.9);
      box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.45);
      flex-shrink: 0;
      text-align: center;
    }
    .legend-short li:nth-child(1) strong {
      border-color: rgba(56, 189, 248, 0.9);
      background: radial-gradient(circle at top left, rgba(56, 189, 248, 0.25), rgba(15, 23, 42, 0.95));
    }
    .legend-short li:nth-child(2) strong {
      border-color: rgba(250, 204, 21, 0.9);
      background: radial-gradient(circle at top left, rgba(250, 204, 21, 0.25), rgba(17, 24, 39, 0.95));
    }
    .legend-short li:nth-child(3) strong {
      border-color: rgba(248, 113, 113, 0.95);
      background: radial-gradient(circle at top left, rgba(248, 113, 113, 0.25), rgba(24, 18, 24, 0.98));
    }
    .legend-short li span,
    .legend-short li {
      color: #e6e7ea;
    }
    .legend-short-note {
      font-size: 0.78rem;
      opacity: 0.8;
      margin-top: 4px;
    }
    .nogo-info {
      display: inline-block;
      margin-top: 4px;
      font-size: 0.82rem;
      opacity: 0.85;
      color: #ffb3b3;
    }

    .legend-full {
      margin-top: 20px;
      padding: 18px 20px;
      border-radius: 16px;
      background:
        radial-gradient(circle at top left, rgba(245, 200, 106, 0.10), transparent 55%),
        radial-gradient(circle at bottom right, rgba(127, 220, 255, 0.12), transparent 55%),
        linear-gradient(135deg, #0b0d16, #111423);
      border: 1px solid rgba(255, 255, 255, 0.06);
      font-size: 0.95rem;
      box-shadow: 0 18px 45px rgba(0, 0, 0, 0.65);
    }
    .legend-full-title {
      font-size: 1.18rem;
      margin-bottom: 12px;
      font-weight: 600;
    }
    .legend-grid {
      display: grid;
      gap: 1.1rem;
    }
    @media (min-width: 900px) {
      .legend-grid {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }
    .legend-item {
      padding: 10px 12px;
      border-radius: 12px;
      background: rgba(8, 10, 20, 0.92);
      border: 1px solid rgba(255, 255, 255, 0.04);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.6);
    }
    .legend-item h3 {
      font-size: 1rem;
      margin: 6px 0 4px;
    }
    .legend-item p {
      margin: 0;
      font-size: 0.88rem;
      line-height: 1.55;
    }

    .legend-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 4px 11px;
      border-radius: 999px;
      font-size: 0.8rem;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      margin-bottom: 4px;
      box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.45);
      background: radial-gradient(circle at top, rgba(255, 255, 255, 0.08), transparent 55%);
    }
    .legend-badge-go {
      color: #e0faff;
      background:
        radial-gradient(circle at top, rgba(56, 189, 248, 0.35), transparent 60%),
        linear-gradient(135deg, rgba(22, 163, 255, 0.95), rgba(56, 189, 248, 0.85));
      border: 1px solid rgba(56, 189, 248, 0.9);
    }
    .legend-badge-review {
      color: #fef9c3;
      background:
        radial-gradient(circle at top, rgba(250, 204, 21, 0.35), transparent 60%),
        linear-gradient(135deg, rgba(202, 138, 4, 0.95), rgba(250, 204, 21, 0.9));
      border: 1px solid rgba(250, 204, 21, 0.9);
    }
    .legend-badge-nogo {
      color: #fee2e2;
      background:
        radial-gradient(circle at top, rgba(248, 113, 113, 0.38), transparent 60%),
        linear-gradient(135deg, rgba(220, 38, 38, 0.96), rgba(248, 113, 113, 0.9));
      border: 1px solid rgba(248, 113, 113, 0.95);
      box-shadow: 0 0 12px rgba(255, 67, 67, 0.55),
                  inset 0 0 8px rgba(255, 95, 95, 0.35);
    }

    .legend-extra {
      margin-top: 1.2rem;
      border-top: 1px solid rgba(255, 255, 255, 0.08);
      padding-top: 0.9rem;
      font-size: 0.9rem;
    }
    .legend-extra h3 {
      margin: 0 0 4px;
      font-size: 0.95rem;
    }
    .legend-extra ul {
      margin: 0 0 4px 1.1rem;
      padding: 0;
    }
    .legend-extra li {
      margin-bottom: 2px;
    }
    .legend-disclaimer {
      margin-top: 8px;
      font-size: 0.78rem;
      opacity: 0.78;
    }

    /* === Partners ticker (BingX / Stripe / Outseta) === */
    .partners-ticker-wrapper {
      margin-top: 26px;
      padding: 6px 0;
      overflow: hidden;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      background:
        radial-gradient(circle at left, rgba(59, 130, 246, 0.18), transparent 55%),
        radial-gradient(circle at right, rgba(236, 72, 153, 0.14), transparent 55%),
        rgba(10, 12, 22, 0.96);
      box-shadow:
        0 10px 25px rgba(0, 0, 0, 0.75),
        0 0 0 1px rgba(15, 23, 42, 0.9);
    }
    .partners-ticker {
      display: flex;
      align-items: center;
      gap: 40px;
      animation: partners-marquee 18s linear infinite;
      white-space: nowrap;
    }
    .partner-pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 4px 14px;
      border-radius: 999px;
      font-size: 0.78rem;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      background: rgba(15, 23, 42, 0.96);
      border: 1px solid rgba(148, 163, 184, 0.85);
      box-shadow:
        0 10px 24px rgba(15, 23, 42, 0.95),
        0 0 12px rgba(59, 130, 246, 0.75);
      color: #e5e7eb;
    }
    .partner-pill span.partner-code {
      font-weight: 700;
      font-size: 0.76rem;
      opacity: 0.95;
    }
    .partner-pill span.partner-desc {
      font-weight: 500;
      text-transform: none;
      letter-spacing: 0;
      font-size: 0.75rem;
      opacity: 0.9;
    }
    @keyframes partners-marquee {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }

/* === FORCE CURSOR FOR ALL OUTSETA BUTTONS === */
[data-o-auth],
[data-o-anonymous],
[data-o-profile],
[data-o-logout-link],
[data-widget-mode] {
  cursor: pointer !important;
}
  </style>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-N0ED2XDCTY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-N0ED2XDCTY');
</script>
</head>

<body>
  <div class="wrap">
    <h1>
      <span class="logo-brain">üß†</span>
      <span class="title-text">CIS Aurora ‚Äî AntyScam</span>
    </h1>
    <p class="muted tagline">
      Wklej adres kontraktu ETH, uruchom analizƒô i zobacz ocenƒô ryzyka w kilka sekund. 
      Inteligentna tarcza anty-scam dla trader√≥w i projekt√≥w Web3.
    </p>

    <nav class="row">
      <a
        class="button"
        data-o-anonymous="1"
        data-o-auth="1"
        data-mode="popup"
        data-widget-mode="register"
      >Za≈Ç√≥≈º konto (trial 3 dni)</a>

      <a
        class="button"
        data-o-anonymous="1"
        data-o-auth="1"
        data-mode="popup"
        data-widget-mode="login"
      >Zaloguj</a>

      <a
        class="button"
        data-o-authenticated="1"
        data-o-profile="1"
        data-mode="popup"
      >Profil / P≈Çatno≈õci</a>

      <a class="button" href="https://www.lucrummediacompany.eu/" target="_blank" rel="noopener">O nas</a>

      <a
        class="button"
        data-o-authenticated="1"
        data-o-logout-link="1"
      >Wyloguj</a>
    </nav>

    <div id="statusBar" class="status-bar" style="display:none">
      <div class="left">
        <span id="statusUser" class="status-pill">‚Äî</span>
        <span id="statusPlan" class="status-pill">Plan: ‚Äî</span>
        <span id="statusState" class="status-pill">Status: ‚Äî</span>
      </div>
      <div class="right muted">Infrastruktura subskrypcji: <b>Outseta</b> + <b>Stripe</b>.</div>
    </div>

    <div class="brand-bar">
      <div class="label">Nasi partnerzy:</div>
      <div class="brand-badges">
        <a href="https://www.outseta.com/" target="_blank" rel="noopener" class="brand-badge">
          <img src="static/outseta-logo-dark.svg" alt="Outseta" style="height:18px; display:block;">
        </a>
        <a href="https://stripe.com/" target="_blank" rel="noopener" class="brand-badge">
          <img src="static/stripe-logo-light.svg" alt="Stripe" style="height:18px; display:block;">
        </a>
      </div>
    </div>

    <div id="deniedCard" class="card denied" style="display:none">
      <h3>üîí Brak dostƒôpu do analizy</h3>
      <p class="muted">Ta funkcja jest dostƒôpna tylko dla zalogowanych u≈ºytkownik√≥w. Utw√≥rz konto i korzystaj z 3-dniowego triala.</p>
      <div class="cta-row">
        <a
          class="button"
          data-o-anonymous="1"
          data-o-auth="1"
          data-mode="popup"
          data-widget-mode="register"
        >Za≈Ç√≥≈º konto</a>

        <a
          class="button"
          data-o-anonymous="1"
          data-o-auth="1"
          data-mode="popup"
          data-widget-mode="login"
        >Zaloguj</a>

        <a
          class="button"
          data-o-authenticated="1"
          data-o-profile="1"
          data-mode="popup"
        >Profil / P≈Çatno≈õci</a>
      </div>

      <div style="height:50px;"></div>

      <!-- Kr√≥tka legenda dla niezalogowanych -->
      <div class="legend-short">
        <p class="legend-short-title">Jak CIS Aurora ocenia kontrakty?</p>
        <ul>
          <li><strong>GO</strong> ‚Äì kontrakt technicznie spe≈Çnia nasze standardy bezpiecze≈Ñstwa (brak proxy z adminem, brak hard-honeypotu, brak drastycznych scam-wzor√≥w).</li>
          <li><strong>REVIEW</strong> ‚Äì kod wyglƒÖda poprawnie, ale zawiera elementy wymagajƒÖce decyzji cz≈Çowieka (governance, mint, podatki, upgradeowalno≈õƒá).</li>
          <li>
  <strong>NO-GO</strong> ‚Äì wysoki poziom ryzyka technicznego (proxy z pe≈ÇnƒÖ kontrolƒÖ, nieograniczony mint, honeypot, agresywne blacklist/whitelist itd.). 
  NO-GO ‚â† automatycznie scam ‚Äî oznacza, ≈ºe kontrakt nie spe≈Çnia standard√≥w CIS Aurora.
</li>
        </ul>
        <p class="legend-short-note">
          üß† Aurora analizuje wy≈ÇƒÖcznie <strong>kod smart kontraktu</strong> ‚Äî bez wp≈Çywu ceny, TVL czy marketingu. 
          üîç ≈ÅƒÖczymy <strong>dog≈ÇƒôbnƒÖ analizƒô technicznƒÖ</strong> z <strong>predykcjƒÖ ryzyka opartƒÖ o AI</strong>, kt√≥ra wychwytuje wzorce scam√≥w niewidoczne na samym wykresie. 
          <br><br>
          üõ°Ô∏è <strong>Najbardziej po≈ºƒÖdanym wynikiem jest GO oraz wysoka ocena techniczna powy≈ºej 8</strong> ‚Äî oznacza to kontrakt mocny, stabilny i bez istotnych zagro≈ºe≈Ñ wed≈Çug standard√≥w CIS Aurora.
        </p>
      </div>
    </div>

    <div id="analyzeCard" class="card" style="display:none">
      <form id="form">
        <label>Adres kontraktu (0x...):</label>
        <input id="address" type="text" placeholder="0x0000000000000000000000000000000000000000" />
        <div class="row">
          <button class="primary" type="submit">Analizuj</button>
        </div>
      </form>

      <!-- === User Disagreement Report Box === -->
      <div id="disagreeBox" style="
        margin-top:18px;
        padding:14px;
        border-radius:10px;
        background:#101421;
        border:1px solid #2a2e37;
      ">
        <div style="font-size:15px;margin-bottom:8px;color:#e6e7ea;font-weight:600;">
          ‚ùì Nie zgadzasz siƒô z ocenƒÖ?
        </div>
        <div style="font-size:13px;color:#9aa0a6;margin-bottom:10px;">
          Wklej adres kontraktu, kt√≥ry chcesz zg≈Çosiƒá do rƒôcznej analizy.
          Otrzymamy go bezpo≈õrednio na e-mail: <b>lucrum.media.company@gmail.com</b>.
        </div>

        <input id="disagreeAddress" type="text"
               placeholder="0x0000000000000000000000000000000000000000"
               style="width:100%;padding:10px;border-radius:8px;
               border:1px solid #2a2e37;background:#0f1220;color:#e6e7ea;margin-bottom:10px;">

        <button id="disagreeSendBtn" style="
          background:#1f2330;color:#e6e7ea;border:none;border-radius:8px;
          padding:8px 14px;cursor:pointer;transition:.2s;width:100%;
        ">Wy≈õlij do analizy</button>

        <div id="disagreeMsg" style="font-size:13px;color:#9aa0a6;margin-top:10px;display:none;"></div>
      </div>
      <!-- === END === -->
    </div>

    <div id="resultCard" class="card" style="display:none">
      <h3>Wynik</h3>

      <div id="overlayHTML" class="card" style="border:none;padding:0;margin:0"></div>
      <!-- Konsola (wy≈ÇƒÖczona): zostawiamy w DOM, ale nie pokazujemy -->
      <pre id="result" style="display:none;margin-top:12px">‚Äî</pre>

      <section class="legend-full">
        <h2 class="legend-full-title">Legenda oceny kontrakt√≥w CIS Aurora</h2>

        <div class="legend-grid">
          <div class="legend-item">
            <div class="legend-badge legend-badge-go">GO</div>
            <h3>GO ‚Äî kontrakt wyglƒÖda dobrze (polecamy)</h3>
            <p>
              W kodzie nie widaƒá powa≈ºnych zagro≈ºe≈Ñ: brak ukrytych blokad handlu, podejrzanego mintu
              czy niebezpiecznych uprawnie≈Ñ w≈Ça≈õciciela. To znaczy, ≈ºe z perspektywy technicznej kontrakt
              wyglƒÖda bezpieczniej ni≈º wiƒôkszo≈õƒá rynku. GO nie jest obietnicƒÖ zysk√≥w, ale sygna≈Çem, ≈ºe
              <strong>ten smart kontrakt mo≈ºna braƒá pod uwagƒô</strong>.
            </p>
          </div>

          <div class="legend-item">
            <div class="legend-badge legend-badge-review">REVIEW</div>
            <h3>REVIEW ‚Äî zatrzymaj siƒô i pomy≈õl</h3>
            <p>
              Kontrakt jest zbudowany poprawnie, ale ma elementy wymagajƒÖce zaufania do zespo≈Çu:
              podatki, mo≈ºliwo≈õƒá zmiany parametr√≥w, mint/burn dla r√≥l, aktualizacje lub DAO.
              W dobrych rƒôkach dzia≈ÇajƒÖ normalnie, w z≈Çych mogƒÖ byƒá u≈ºyte agresywnie.
              REVIEW oznacza: projekt mo≈ºe byƒá OK, ale <strong>przeczytaj raport i sprawd≈∫ zesp√≥≈Ç</strong>,
              zanim wejdziesz z wiƒôkszym kapita≈Çem.
            </p>
          </div>

          <div class="legend-item">
            <div class="legend-badge legend-badge-nogo">NO-GO</div>
            <h3>NO-GO ‚Äî nie polecamy</h3>
            <p>
              W kodzie sƒÖ mechanizmy, kt√≥re mogƒÖ realnie zagroziƒá ≈õrodkom: blokady sprzeda≈ºy,
              mint bez limitu, skrajna centralizacja, drainer lub zachowanie jak honeypot.
              To nie musi byƒá od razu scam, ale technicznie wyglƒÖda bardzo s≈Çabo.
              NO-GO oznacza, ≈ºe <strong>nie polecamy</strong>, chyba ≈ºe w pe≈Çni rozumiesz ryzyko
              i traktujesz to jak spekulacjƒô z du≈ºƒÖ szansƒÖ utraty ≈õrodk√≥w.
            </p>
          </div>
        </div>

        <div class="legend-extra">
          <h3>Aurora ocenia dwutorowo</h3>
          <p>
            <strong>1) Kod ‚Üí GO / REVIEW / NO-GO.</strong>
            Analizujemy czystƒÖ logikƒô kontraktu: uprawnienia w≈Ça≈õciciela, mint, podatki, blokady handlu,
            blacklisty i inne mechanizmy, kt√≥re mogƒÖ uderzyƒá w inwestora.
          </p>
          <p>
            <strong>2) Og√≥lne ryzyko projektu.</strong>
            Sprawdzamy, czy struktura kontraktu przypomina solidne projekty z rynku, czy raczej schematy
            znane ze scam√≥w. Nie interesuje nas hype ani marketing ‚Äî liczy siƒô tylko to, co faktycznie siedzi w kodzie.
          </p>
        </div>

        <p class="legend-disclaimer">
          CIS Aurora ocenia wy≈ÇƒÖcznie <strong>techniczne ryzyko w kodzie smart kontraktu</strong>.
          Nie bierzemy pod uwagƒô ceny, TVL, marketingu ani reputacji zespo≈Çu.
          Aurora pomaga wychwyciƒá ryzyko, ale <strong>zawsze r√≥b w≈Çasny research (DYOR)</strong>,
          a ostateczna decyzja inwestycyjna nale≈ºy do Ciebie.
        </p>
      </section>
    </div>

    <div class="partners-ticker-wrapper">
      <div class="partners-ticker">
        <div class="partner-pill">
          <span class="partner-code">BingX</span>
          <span class="partner-desc">partner tradingowy</span>
        </div>
        <div class="partner-pill">
          <span class="partner-code">Stripe</span>
          <span class="partner-desc">p≈Çatno≈õci online</span>
        </div>
        <div class="partner-pill">
          <span class="partner-code">Outseta</span>
          <span class="partner-desc">logowanie &amp; subskrypcje</span>
        </div>
        <!-- duplikaty dla p≈Çynnej pƒôtli animacji -->
        <div class="partner-pill">
          <span class="partner-code">BingX</span>
          <span class="partner-desc">partner tradingowy</span>
        </div>
        <div class="partner-pill">
          <span class="partner-code">Stripe</span>
          <span class="partner-desc">p≈Çatno≈õci online</span>
        </div>
        <div class="partner-pill">
          <span class="partner-code">Outseta</span>
          <span class="partner-desc">logowanie &amp; subskrypcje</span>
        </div>
      </div>
    </div>

    <div class="footer muted">
      CIS Aurora ‚Äî AntyScam &nbsp;|&nbsp; projekt i rozw√≥j:&nbsp;
      <a href="https://www.lucrummediacompany.eu/" target="_blank" rel="noopener">Lucrum Media Company</a>
    </div>
  </div>

  <script>
    const DEBUG_TAIL = false; // ‚õîÔ∏è wy≈ÇƒÖczamy konsolƒô pod wynikiem

    const form        = document.getElementById("form");
    const resBox      = document.getElementById("result");
    const htmlBox     = document.getElementById("overlayHTML");
    const analyzeCard = document.getElementById("analyzeCard");
    const deniedCard  = document.getElementById("deniedCard");
    const resultCard  = document.getElementById("resultCard");
    const statusBar   = document.getElementById("statusBar");
    const statusUser  = document.getElementById("statusUser");
    const statusPlan  = document.getElementById("statusPlan");
    const statusState = document.getElementById("statusState");
    const analyzeBtn  = document.querySelector("#analyzeCard button.primary");

    let isAuthed = false;
    let profile  = null;

    function setDisplay(el, show){ if(el) el.style.display = show ? "" : "none"; }
    function fmtDate(d){ try { return d.toISOString().slice(0,10); } catch(_) { return ""; } }
    function getLower(x){ return (x===undefined||x===null) ? "" : String(x).toLowerCase(); }

    function renderStatus(p){
      if(!p){ setDisplay(statusBar,false); return; }
      setDisplay(statusBar,true);

      const email = p.Email || "‚Äî";
      const acc   = p.Account || {};
      const subs  = Array.isArray(acc.Subscriptions) ? acc.Subscriptions : [];
      const s     = subs.length ? subs[0] : null;

      let planName =
        (s && s.Plan && s.Plan.Name) ||
        (acc.CurrentSubscription && acc.CurrentSubscription.Plan && acc.CurrentSubscription.Plan.Name) ||
        (acc.Plan && acc.Plan.Name) || "";

      let stageCode = acc.AccountStage;
      try { stageCode = parseInt(stageCode,10); } catch(_) { stageCode = NaN; }
      const stageName = String(acc.AccountStageName || acc.StageName || acc.AccountStage || "").toLowerCase();

      const trialEndsRaw = acc.TrialEndsAt || acc.TrialEndDate || acc.TrialEndsOn || null;
      const trialIsActive = (() => {
        if(!trialEndsRaw) return false;
        const end = new Date(trialEndsRaw);
        return !isNaN(end.getTime()) && end.getTime() > Date.now();
      })();

      // Je≈õli nie mamy nazwy planu, ale Outseta m√≥wi "trial" ‚Üí ustaw "Trial"
      if(!planName && (stageCode === 2 || stageName.includes("trial") || trialIsActive)){
        planName = "Trial";
      }
      if(!planName) planName = "Brak planu";

      // U≈ºywamy tej samej logiki co gate, ≈ºeby status by≈Ç sp√≥jny z dostƒôpem
      const allowed = canAnalyze(p);
      let stateLabel;

      if(allowed){
        if(trialIsActive){
          stateLabel = trialEndsRaw
            ? ("Trial aktywny do " + fmtDate(new Date(trialEndsRaw)))
            : "Trial aktywny";
        }else{
          stateLabel = "Subskrypcja aktywna";
        }
      }else{
        stateLabel = "Brak aktywnej subskrypcji";
      }

      statusUser.textContent  = email;
      statusPlan.textContent  = "Plan: " + planName;
      statusState.textContent = "Status: " + stateLabel;
    }

    function canAnalyze(p){
      if(!p || !p.Account) return false;

      const acc  = p.Account || {};
      const subs = Array.isArray(acc.Subscriptions) ? acc.Subscriptions : [];
      const s    = subs.length ? subs[0] : null;
      const subStatus = getLower(s && (s.Status || s.State));

      let stageCode = acc.AccountStage;
      try { stageCode = parseInt(stageCode, 10); } catch(_) { stageCode = NaN; }
      if(stageCode === 2 || stageCode === 3) return true;

      if(["active","trial","trialing"].includes(subStatus)) return true;

      const accStageName = String(
        acc.AccountStageName || acc.StageName || acc.AccountStage || acc.Stage || ""
      ).toLowerCase();
      if(accStageName.includes("trial")) return true;

      const trialEndsRaw = acc.TrialEnd || acc.TrialEndsAt || acc.TrialEndDate || acc.TrialEndsOn;
      if(trialEndsRaw){
        const dt = new Date(trialEndsRaw);
        if(!isNaN(dt.getTime()) && dt.getTime() > Date.now()){
          return true;
        }
      }
      return false;
    }

    function renderGate(){
      if(isAuthed){
        setDisplay(deniedCard,false);
        setDisplay(analyzeCard,true);
        setDisplay(resultCard,true);

        const allowed = canAnalyze(profile);
        if (analyzeBtn){
          analyzeBtn.disabled = !allowed;
          analyzeBtn.title = allowed ? "" : "Wymagana aktywna subskrypcja lub aktywny trial.";
        }

        let note = document.getElementById("paywallNote");
        if(!note){
          note = document.createElement("div");
          note.id = "paywallNote";
          note.style.cssText = "margin-top:10px;font-size:14px;padding:10px;border:1px solid #2a2e37;border-radius:8px;background:#101421;color:#9aa0a6;";
          analyzeCard.appendChild(note);
        }
        note.textContent = allowed
          ? "‚úÖ Masz dostƒôp do analizy (plan aktywny lub trial)."
          : "üîí Dostƒôp zablokowany: aktywuj plan. Kliknij przycisk ‚ÄûProfil / P≈Çatno≈õci‚Äù powy≈ºej.";
      }else{
        setDisplay(analyzeCard,false);
        setDisplay(resultCard,false);
        setDisplay(deniedCard,true);
      }
    }

    async function refreshAuthState(){
      try{
        const payload = await Outseta.getJwtPayload();
        isAuthed = !!payload;
        profile = isAuthed ? await Outseta.getUser() : null;
      }catch(_){ isAuthed=false; profile=null; }
      renderStatus(profile);
      renderGate();
    }

    Outseta.on('accessToken.set', refreshAuthState);
    Outseta.on('logout', refreshAuthState);
    refreshAuthState();

    if(form){
      form.addEventListener("submit", async (e)=>{
        e.preventDefault();
        if(!isAuthed){ setDisplay(deniedCard,true); return; }
        if(!canAnalyze(profile)){
          htmlBox.textContent = "üîí Wymagana aktywna subskrypcja lub trial. U≈ºyj przycisku ‚ÄûProfil / P≈Çatno≈õci‚Äù.";
          return;
        }

        htmlBox.innerHTML = "<div style='padding:12px;color:#9aa0a6'>‚è≥ Analiza w toku‚Ä¶</div>";
        const addr = document.getElementById("address").value.trim();

        let token = "";
        try { token = await Outseta.getAccessToken(); } catch(_){}
        const email = (profile && profile.Email) ? profile.Email : "";

        const resp = await fetch("/analyze", {
          method: "POST",
          headers: {
            "Content-Type": "application/x-www-form-urlencoded",
            "Authorization": (token ? ("Bearer " + token) : ""),
            "X-User-Email": email
          },
          body: new URLSearchParams({ address: addr })
        });

        // Pobierz JSON raz ‚Äì wsp√≥lny dla DEBUG_TAIL i obs≈Çugi NO_SOURCE
        let data = null;
        try {
          data = await resp.json();
        } catch(_) {
          data = null;
        }

        // Konsola pod wynikiem ‚Äî ca≈Çkowicie wy≈ÇƒÖczona gdy DEBUG_TAIL=false
        if (DEBUG_TAIL && data) {
          try{
            if(resBox){
              let txt = data.error
                ? ("‚ùå " + (data.message || data.error))
                : `Status: ${data.status}\nCzas: ${data.elapsed_sec}s\nAdres: ${data.address}\nCmd: ${data.cmd}\n\nSTDOUT (tail):\n${data.stdout_tail || ""}\n\nSTDERR (tail):\n${data.stderr_tail || ""}`;
              if(data.last_report) txt += `\n\nOstatni raport: ${data.last_report}`;
              resBox.textContent = txt;
              resBox.style.display = "block";
            }
          }catch(_){}
        }

        // B≈ÇƒÖd analizy (np. nieprawid≈Çowy adres) ‚Äî nie pokazujemy starego raportu
        if (!resp.ok || (data && data.error && data.status !== "no_source")) {
          const msg =
            (data && (data.message || data.error))
              ? data.message || data.error
              : "WystƒÖpi≈Ç b≈ÇƒÖd techniczny podczas analizy kontraktu. Spr√≥buj ponownie za chwilƒô.";

          htmlBox.innerHTML = `
            <div style="
              padding:20px;
              border-radius:12px;
              background:#1a0f14;
              border:1px solid #7f1d1d;
              color:#fecaca;
              font-size:15px;
              line-height:1.5;
            ">
              <div style="font-size:20px;margin-bottom:6px;">‚ùå B≈ÇƒÖd analizy</div>
              <div>${msg}</div>
            </div>`;
          return;
        }

        // üîçüö´ Kod ≈∫r√≥d≈Çowy niedostƒôpny ‚Äî obs≈Çuga NO_SOURCE z backendu
        if (data && data.status === "no_source") {
          htmlBox.innerHTML = `
            <div style="
              padding:20px;
              border-radius:12px;
              background:#1a0f14;
              border:1px solid #3a2028;
              color:#e8c5cc;
              font-size:15px;
              line-height:1.5;
            ">
              <div style="font-size:20px;margin-bottom:6px;">üîçüö´ Kod ≈∫r√≥d≈Çowy niedostƒôpny</div>
              <div>Nie uda≈Ço siƒô pobraƒá kodu ≈∫r√≥d≈Çowego kontraktu z Etherscan.<br>
              Audyt nie mo≈ºe zostaƒá wykonany bez publicznego ≈∫r√≥d≈Ça.</div>
            </div>`;
          return;
        }

        // Zawsze ≈Çadujemy tylko finalny raport HTML **po path, nie last-report!!**
        try {
          const lastPath = data && data.last_report ? data.last_report : null;

          if (!lastPath) {
            htmlBox.innerHTML = `
              <div style="padding:20px;border-radius:12px;background:#1a0f14;border:1px solid #7f1d1d;color:#fecaca;font-size:15px;line-height:1.5;">
                <div style="font-size:20px;margin-bottom:6px;">‚ö†Ô∏è Brak raportu</div>
                <div>Backend nie zwr√≥ci≈Ç ≈õcie≈ºki raportu (last_report). Spr√≥buj ponownie.</div>
              </div>`;
          } else {
            const r = await fetch("/last-report-html?path=" + encodeURIComponent(lastPath));
            const txt = await r.text();
            htmlBox.innerHTML = (r.ok ? txt : `<pre>${txt}</pre>`);
          }
        } catch (e) {
          htmlBox.innerHTML = `<pre>${String(e)}</pre>`;
        }
      });
    }

    // === Disagreement API box logic ===
    const disagreeBtn = document.getElementById("disagreeSendBtn");
    const disagreeMsg = document.getElementById("disagreeMsg");

    if (disagreeBtn && disagreeMsg) {
      disagreeBtn.addEventListener("click", async (e) => {
        e.preventDefault();

        const addrInput = document.getElementById("disagreeAddress");
        const addr = addrInput ? addrInput.value.trim() : "";

        if (!addr) {
          disagreeMsg.style.display = "block";
          disagreeMsg.textContent = "‚ùå Podaj adres kontraktu.";
          return;
        }

        disagreeMsg.style.display = "block";
        disagreeMsg.textContent = "‚è≥ Wysy≈Çamy zg≈Çoszenie‚Ä¶";

        try {
          const resp = await fetch("/send-disagreement", {
            method: "POST",
            headers: { "Content-Type": "application/x-www-form-urlencoded" },
            body: new URLSearchParams({
              address: addr,
              user_email: (profile && profile.Email) ? profile.Email : ""
            })
          });

          let data = null;
          try { data = await resp.json(); } catch (_) {}

          if (resp.ok && data && data.status === "ok") {
            disagreeMsg.textContent = "‚úÖ Zg≈Çoszenie zosta≈Ço wys≈Çane do zespo≈Çu Aurora. Dziƒôkujemy!";
          } else {
            const msg = data && data.message
              ? data.message
              : "Nie uda≈Ço siƒô wys≈Çaƒá zg≈Çoszenia. Spr√≥buj ponownie p√≥≈∫niej.";
            disagreeMsg.textContent = "‚ùå " + msg;
          }
        } catch (err) {
          disagreeMsg.textContent = "‚ùå WystƒÖpi≈Ç b≈ÇƒÖd sieci podczas wysy≈Çania zg≈Çoszenia.";
        }
      });
    }
  </script>
  <script>
    (function () {
      try {
        var url = new URL(window.location.href);
        var changed = false;

        ["access_token", "token_type", "expires_in", "scope"].forEach(function (key) {
          if (url.searchParams.has(key)) {
            url.searchParams.delete(key);
            changed = true;
          }
        });

        if (changed) {
          var clean =
            url.pathname +
            (url.searchParams.toString() ? "?" + url.searchParams.toString() : "") +
            url.hash;
          window.history.replaceState({}, document.title, clean);
        }
      } catch (err) {
        console.warn("Token cleanup error:", err);
      }
    })();
  </script>
</body>
</html>
